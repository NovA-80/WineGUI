stages:
  - build
#  - test

build:
  stage: build
  script: ./build_prod.sh
  tags:
    - gtk
  artifacts:
    name: "Packages + Documentation"
    expire_in: 1 week
    paths:
    - doc/doxygen/
    - build/WineGUI-*.deb
    - build/WineGUI-*.rpm
    - build/WineGUI-*.tar.gz
  cache:
      key: "$CI_PIPELINE_ID"
      policy: push
      paths:
        - build/bin/

#test:
#  stage: test
#  script: ./build/bin/runTests
#  tags:
#    - gtk
#  cache:
#      key: "$CI_PIPELINE_ID"
#      policy: pull
#      paths:
#        - build/bin/